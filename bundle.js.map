{"version":3,"sources":["webpack:///webpack/bootstrap 9407e66556976963ba00","webpack:///./src/util.js","webpack:///./src/enemy.js","webpack:///./src/weapon.js","webpack:///./src/player.js","webpack:///./src/unit.js","webpack:///./src/game.js","webpack:///./src/floor.js","webpack:///./src/hud.js","webpack:///./src/map_node.js","webpack:///./src/path.js","webpack:///./src/room.js","webpack:///./src/index.js"],"names":["randomNumber","BinaryMinHeap","comparator","store","length","node","push","heapifyUp","extracted","maxNode","pop","heapifyDown","i","max","indexOf","index","heapifyNode","childIndices","getChildIndices","swapIndex","forEach","child","childIndex","swapNodes","parentIndex","getParentIndex","parent","currentIndex","Math","floor","indices","storeSize","childIndex2","childIndex1","min","ceil","random","Enemy","name","hp","weap","type","num","generateItem","item","restore","WEAPONTYPES","isw00","isw01","isw02","isw03","isw04","isw05","isw06","isw07","isw08","isw09","isw10","isw11","isw12","isw13","isw14","isw15","isw16","isw17","isw18","isw19","isw20","isw21","isw22","Weapon","calcWeapon","identifier","damage","rngDamage","Player","lvl","xp","eventKey","pos","Object","assign","x","y","event","hud","updateEvents","enemy","damages","addBattleEvent","xpGainedFrom","terminate","updateHud","xpGained","addXPEvent","xpTnl","lvlUp","addLvlUpEvent","addItemPickupEvent","attr","updatePlayer","nextNode","object","Unit","Game","playerName","canvas","ctx","tileSet","keydownEnabled","floors","playerAction","bind","enterNewLevel","initNewFloor","fov","window","innerWidth","innerHeight","player","addEventListener","resize","width","height","initPlayer","initHud","spawnPlayer","updateFloor","addFloorEvent","render","toggleKeydown","preventDefault","code","playerAttack","moveAttempt","key","map","hasItem","playerPickup","validNode","playerMove","update","isHole","idx","fps","now","then","Date","interval","delta","animate","animation","requestAnimationFrame","updateSingleTile","cancelAnimationFrame","move","updateCameraPos","animateBasicAttack","attackNode","getPlayerFacingNode","result","attack","removeEnemy","updateEnemies","enemies","gameOver","pickupItem","removeEventListener","modal","document","querySelector","style","display","onclick","target","location","reload","Floor","mapWidth","mapHeight","number","tilesLoaded","tSize","tiles","cameraPos","cx","cy","initialRender","initialize","getBackgroundMap","rooms","generateRooms","paths","generatePaths","removeGaps","generateWalls","placeHole","spawnEnemies","loadTiles","count","ts","diff","posX","playerCanvasPos","posY","tile","clearRect","drawImage","calcBounds","camX","camY","drawOuterBounds","j","xPos","yPos","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","imageSmoothingEnabled","cb","ch","darken","wb","fovX","fovY","xDiff","abs","yDiff","alpha","fillStyle","globalAlpha","fillRect","tileSetKeys","keys","Image","src","onload","init","backgroundMap","row","newMapNode","dirs","removed","n","s","e","w","solids","dir","validwalls","c","newtype","minWidth","maxWidth","minHeight","maxHeight","attempts","maxRooms","loop1","newRoom","collidesWith","door1","generateDoorLocation","door2","path","holeNode","randomLocation","hole","room","absPos","enemyIdx","splice","weapon","monsterhp","monsterweap","spawn","Hud","currentFloor","events","classes","clss","firstChild","nodeValue","enemiesRemaining","value","off","def","currentlvl","eventsNode","span","createElement","text","createTextNode","appendChild","insertBefore","childNodes","removeChild","lastChild","MapNode","isDoor","fCost","gCost","validPos","neighbors","traversable","neighbor","Path","startNode","targetNode","aStarPathFinder","node1","node2","open","fCostComparator","closed","calculateHCost","current","extract","reconstructPath","getTraversableNeighbors","newGCost","recompareNode","currentNode","parentNode","dx","dy","Room","id","getRandomPosition","corners","getCorners","edges","linearizeEdges","drawMain","xUpperLimit","yUpperLimit","door","openPath","coords","absX","absY","absXLimit","absYLimit","nw","ne","sw","se","CaveTileset","w1","wn","we","ww","wnw","wne","ws","wsw","wse","cv","hs","he","hn","hw","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","cuta00","cuta01","cuta02","cuta03","cuta04","cutd00","cutd01","cutd02","cutd03","cutd04","empty","newGame","test","getElementById","getContext","game","enterGameScreen","entergame","focus","mainmenu","menubuttons","getElementsByClassName","newgame","howto","about","backbuttons","Array","from","el","parentElement","bgmusic","toggleAudio","play","isPlaying","pause","backgroundImage"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9407e66556976963ba00","export class BinaryMinHeap {\n  constructor(comparator) {\n    this.store = [];\n    this.comparator = comparator;\n  }\n\n  count() {\n    return this.store.length;\n  }\n\n  push(node) {\n    this.store.push(node);\n    this.heapifyUp(this.store.length - 1);\n  }\n\n  extract() {\n    const extracted = this.store[0];\n    const maxNode = this.store.pop();\n\n    if (this.store.length > 0) {\n      this.store[0] = maxNode;\n      this.heapifyDown(0);\n    }\n\n    return extracted;\n  }\n\n  remove(node) {\n    for (let i = 0; i < this.store.length; i++) {\n      if (this.store[i] !== node) continue;\n\n      const max = this.store.pop();\n\n      if (i === this.store.length - 1) break;\n\n      this.store[i] = max;\n      this.heapifyUp(i);\n      this.heapifyDown(i);\n      break;\n    }\n  }\n\n  recompareNode(node) {\n    this.heapifyDown(this.store.indexOf(node));\n  }\n\n  heapifyDown(index) {\n    const heapifyNode = this.store[index],\n    childIndices = this.getChildIndices(index);\n    if (childIndices.length > 0) {\n      let swapIndex = null;\n\n      childIndices.forEach(childIndex => {\n        const child = this.store[childIndex];\n        if (this.comparator(heapifyNode, child) === 1) {\n          swapIndex = childIndex;\n        }\n      });\n\n      if (!swapIndex) return;\n\n      this.swapNodes(heapifyNode, index, swapIndex);\n\n      this.heapifyDown(swapIndex);\n    }\n  }\n\n  heapifyUp(index) {\n    if (index > 0) {\n      const heapifyNode = this.store[index],\n      parentIndex = this.getParentIndex(index);\n      const parent = this.store[parentIndex];\n\n      if (this.comparator(heapifyNode, parent) === 1) return;\n\n      this.swapNodes(heapifyNode, index, parentIndex);\n\n      this.heapifyUp(parentIndex);\n    }\n  }\n\n  swapNodes(heapifyNode, currentIndex, swapIndex) {\n    this.store[currentIndex] = this.store[swapIndex];\n    this.store[swapIndex] = heapifyNode;\n  }\n\n  getParentIndex(index) {\n    return Math.floor((index + 1) / 2) - 1;\n  }\n\n  getChildIndices(index) {\n    const indices = [],\n    storeSize = this.store.length,\n    childIndex2 = (index + 1) * 2,\n    childIndex1 = childIndex2 - 1;\n\n    if (childIndex2 < storeSize) indices.push(childIndex2);\n    if (childIndex1 < storeSize) indices.push(childIndex1);\n    return indices;\n  }\n}\n\nexport function randomNumber(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import Unit from './unit';\nimport Weapon from './weapon';\n\nexport default class Enemy extends Unit {\n  constructor(name, hp, weap, type, num) {\n    super(name, hp, weap, type);\n\n    this.generateItem(num);\n  }\n\n  generateItem(num) {\n    if (Math.random() * 10  > 8) {\n      this.item = new Weapon(num);\n    } else return null;\n  }\n\n  terminate() {\n    this.node.restore(this.item);\n    this.node = null;\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/enemy.js","import {randomNumber} from './util';\n\nconst WEAPONTYPES = {\n  isw00 : 'knife',\n  isw01 : 'cobalt knife',\n  isw02 : 'golden knife',\n  isw03 : 'demonic knife',\n  isw04 : 'short sword',\n  isw05 : 'iron sword',\n  isw06 : 'steel sword',\n  isw07 : 'empowered blade',\n  isw08 : 'royal sword',\n  isw09 : 'emerald blade',\n  isw10 : 'draconic sword',\n  isw11 : 'knights sword',\n  isw12 : 'cobalt sword',\n  isw13 : 'golden sword',\n  isw14 : 'demonic sword',\n  isw15 : 'frizuhasa',\n  isw16 : 'champions broadsword',\n  isw17 : 'heroic broadsword',\n  isw18 : 'legendary broadsword',\n  isw19 : 'terrakuugi',\n  isw20 : 'izakugaken',\n  isw21 : 'underworld slayer',\n  isw22 : 'ragikagukenmasa'\n};\n\nexport default class Weapon {\n  constructor(num) {\n    this.calcWeapon(num);\n  }\n\n  calcWeapon(num) {\n    const identifier = num % 23;\n    const type = identifier > 9 ? `isw${identifier}` : `isw0${identifier}`;\n    this.type = type;\n    this.name = WEAPONTYPES[this.type];\n    this.damage = this.rngDamage(num);\n  }\n\n  rngDamage(num) {\n    return (num * 9) + randomNumber(0, Math.floor(num * 3 / 2)) + 5;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/weapon.js","import Unit from './unit';\nimport Weapon from './weapon';\n\nexport default class Player extends Unit {\n  constructor(name) {\n    super(name);\n    this.type = 'hs';\n    this.hp = [100, 100];\n    this.weap = new Weapon(0);\n    this.lvl = 1;\n    this.xp = 0;\n  }\n\n  moveAttempt(eventKey) {\n    const pos = Object.assign({}, { x: this.node.x, y: this.node.y });\n\n    switch (eventKey) {\n      case 'w':\n      case 'ArrowUp':\n        pos.y -= 1;\n        this.type = 'hn';\n        break;\n      case 's':\n      case 'ArrowDown':\n        pos.y += 1;\n        this.type = 'hs';\n        break;\n      case 'a':\n      case 'ArrowLeft':\n        pos.x -= 1;\n        this.type = 'hw';\n        break;\n      case 'd':\n      case 'ArrowRight':\n        this.type = 'he';\n        pos.x += 1;\n    }\n\n    return pos;\n  }\n\n  addEvent(event) {\n    this.hud.updateEvents(event);\n  }\n\n  attack(enemy) {\n    this.damages(enemy);\n\n    this.hud.addBattleEvent(this, enemy);\n\n    if (enemy.hp[0] === 0) {\n      this.xpGainedFrom(enemy);\n      return enemy.terminate();\n    } else {\n      enemy.damages(this);\n\n      this.hud.addBattleEvent(enemy, this);\n      this.updateHud('hp');\n\n      if (this.hp[0] === 0) return this;\n    }\n  }\n\n  xpGainedFrom(enemy) {\n    const xpGained = (enemy.hp[1] / 2) + enemy.weap.damage;\n    this.xp += xpGained;\n\n    this.updateHud('xp', enemy);\n    this.hud.addXPEvent(xpGained, enemy);\n\n    if (this.xpTnl()) this.lvlUp();\n  }\n\n  xpTnl() {\n    return this.xp >= (this.lvl * 100);\n  }\n\n  lvlUp() {\n    this.lvl += 1;\n    this.xp = 0;\n    this.hp = [(this.lvl * 100), (this.lvl * 100)];\n\n    this.updateHud('xp');\n    this.updateHud('lvl');\n    this.updateHud('hp');\n    this.hud.addLvlUpEvent();\n  }\n\n  pickupItem(item) {\n    if (item instanceof Weapon) {\n      this.weap = item;\n    }\n\n    this.updateHud('weap');\n    this.hud.addItemPickupEvent(item);\n  }\n\n  updateHud(attr) {\n    this.hud.updatePlayer(attr);\n  }\n\n  move(nextNode) {\n    nextNode.object = this;\n\n    this.node.restore();\n    this.node = nextNode;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/player.js","export default class Unit {\n  constructor(name, hp, weap, type) {\n    this.name = name;\n    this.hp = hp;\n    this.weap = weap;\n    this.type = type;\n  }\n\n  spawn(node) {\n    node.object = this;\n    this.node = node;\n\n    return node;\n  }\n\n  damages(enemy) {\n    enemy.hp[0] -= this.weap.damage;\n    if (enemy.hp[0] < 0) enemy.hp[0] = 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/unit.js","import Floor from './floor';\nimport Enemy from './enemy';\nimport Player from './player';\nimport Hud from './hud';\n\nexport default class Game {\n  constructor(playerName, canvas, ctx, tileSet) {\n    this.playerName = playerName;\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.tileSet = tileSet;\n    this.keydownEnabled = false;\n    this.floors = 0;\n\n    this.playerAction = this.playerAction.bind(this);\n\n    this.enterNewLevel();\n  }\n\n  enterNewLevel() {\n    this.floors += 1;\n    this.initNewFloor();\n    this.floor.fov = {\n      x: Math.floor(window.innerWidth / 64),\n      y: Math.floor(window.innerHeight / 64)\n    };\n\n    if (!this.player) {\n      window.addEventListener('resize', this.resize.bind(this));\n      this.canvas.width = window.innerWidth;\n      this.canvas.height = window.innerHeight;\n\n      this.initPlayer();\n      this.initHud();\n    } else {\n      this.floor.spawnPlayer(this.player);\n      this.hud.updateFloor(this.floor);\n    }\n    this.hud.addFloorEvent();\n\n    this.floor.render();\n  }\n\n  initNewFloor() {\n    this.floor = new Floor(this.floors, this.ctx, this.tileSet);\n  }\n\n  initPlayer() {\n    this.player = new Player(this.playerName);\n    this.floor.spawnPlayer(this.player);\n    this.toggleKeydown();\n  }\n\n  initHud() {\n    this.hud = new Hud(this.player, this.ctx);\n    this.hud.updateFloor(this.floor);\n  }\n\n  resize() {\n    this.floor.fov = {\n      x: Math.floor(window.innerWidth / 64),\n      y: Math.floor(window.innerHeight / 64)\n    };\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n\n    this.floor.render();\n  }\n\n  playerAction() {\n    event.preventDefault();\n\n    if (event.code === 'Space') {\n      this.playerAttack();\n      return;\n    } else {\n      const pos = this.player.moveAttempt(event.key);\n      const nextNode = this.floor.map[pos.y][pos.x];\n\n      if (nextNode.hasItem()) {\n        this.playerPickup(nextNode);\n      } else if (this.floor.validNode(nextNode)) {\n        this.playerMove(nextNode);\n      }\n\n      this.floor.update();\n\n      if (this.player.node.isHole) {\n        this.enterNewLevel();\n      }\n    }\n  }\n\n  animateBasicAttack() {\n    this.toggleKeydown();\n    let idx = 0, fps = 10, now, then = Date.now(), interval = 1000/fps, delta;\n\n    (function animate() {\n      const animation = requestAnimationFrame(animate.bind(this));\n      now = Date.now();\n      delta = now - then;\n\n      if (delta > interval) {\n        then = now - (delta % interval);\n        this.floor.updateSingleTile(`cutd0${idx % 5}`);\n\n        idx++;\n        if (idx % 5 === 0) {\n          cancelAnimationFrame(animation);\n          this.floor.updateSingleTile('empty');\n          this.toggleKeydown();\n        }\n      }\n    }.bind(this))();\n  }\n\n  playerMove(node) {\n    this.player.move(node);\n    this.floor.updateCameraPos();\n  }\n\n  playerAttack() {\n    this.animateBasicAttack();\n\n    const attackNode = this.floor.getPlayerFacingNode();\n    const enemy = attackNode.object;\n    if (!(enemy instanceof Enemy)) return;\n\n    const result = this.player.attack(enemy);\n\n    if (result instanceof Enemy) {\n      this.floor.removeEnemy(result);\n      this.hud.updateEnemies(this.floor.enemies);\n    } else if (result instanceof Player) {\n      this.gameOver();\n    }\n  }\n\n  playerPickup(node) {\n    this.player.pickupItem(node.object);\n    node.restore();\n  }\n\n  toggleKeydown() {\n    if (this.keydownEnabled) {\n      this.keydownEnabled = false;\n      window.removeEventListener('keydown', this.playerAction);\n      return;\n    }\n    window.addEventListener('keydown', this.playerAction);\n    this.keydownEnabled = true;\n  }\n\n  gameOver() {\n    this.toggleKeydown();\n    this.hud.updateEvents('You have died.');\n\n    const modal = document.querySelector('.modal-gameover');\n    modal.style.display = 'block';\n\n    window.onclick = function() {\n      if (event.target !== modal) {\n        location.reload(true);\n      }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","import Room from './room';\nimport MapNode from './map_node';\nimport Path from './path';\nimport Enemy from './enemy';\nimport Player from './player';\nimport {randomNumber} from './util';\n\n\nexport default class Floor {\n  constructor(num, ctx, tileSet, mapWidth = 50, mapHeight = 50) {\n    this.number = num;\n    this.tilesLoaded = 0;\n    this.tileSet = tileSet;\n    this.tSize = 64;\n    this.fov = {x: 15, y: 15};\n    this.ctx = ctx;\n    this.tiles = {};\n    this.mapWidth = mapWidth;\n    this.mapHeight = mapHeight;\n    this.cameraPos = {cx: 0, cy: 0};\n    this.enemies = [];\n    this.initialRender = true;\n    window.updateSingleTile = this.updateSingleTile.bind(this);\n    this.initialize();\n  }\n\n  initialize() {\n    this.map = this.getBackgroundMap(this.mapWidth, this.mapHeight);\n    this.rooms = this.generateRooms(5, 8, 5, 8, 400, 12);\n    this.paths = this.generatePaths();\n    this.removeGaps();\n    this.generateWalls();\n    this.placeHole();\n    this.spawnEnemies(20);\n  }\n\n  render() {\n    if (this.initialRender) {\n      this.initialRender = false;\n      this.loadTiles(this.tileSet);\n    } else this.update();\n  }\n\n  init(count) {\n    this.tilesLoaded++;\n    if (this.tilesLoaded === count) {\n      this.update();\n    }\n  }\n\n  updateSingleTile(type) {\n    const ts = this.tSize;\n    const diff = { x: 0, y:0 };\n    const {cx, cy} = this.cameraPos;\n\n    switch (this.player.type) {\n      case 'hn':\n        diff.y = -1;\n        break;\n      case 'hs':\n        diff.y = 1;\n        break;\n      case 'hw':\n        diff.x = -1;\n        break;\n      case 'he':\n        diff.x = 1;\n        break;\n    }\n\n    const posX = this.playerCanvasPos.x + diff.x;\n    const posY = this.playerCanvasPos.y + diff.y;\n\n    const tile = this.map[cy + diff.y][cx + diff.x];\n\n    this.ctx.clearRect(posX*ts, posY*ts, ts, ts);\n    this.ctx.drawImage(this.tiles[tile.type], posX*ts, posY*ts, ts, ts);\n    if (tile.object) {\n      this.ctx.drawImage(this.tiles[tile.object.type], posX*ts, posY*ts, ts, ts);\n    }\n    this.ctx.drawImage(this.tiles[type], posX*ts, posY*ts, ts, ts);\n  }\n\n  update() {\n    const ts = this.tSize;\n    const {camX, camY} = this.calcBounds();\n\n    this.drawOuterBounds();\n\n    for (let i = 0; i < this.fov.y; i++) {\n      for (let j = 0; j < this.fov.x; j++) {\n        const tile = this.map[camY + i][camX + j];\n        const xPos = j * ts;\n        const yPos = i * ts;\n\n        this.ctx.webkitImageSmoothingEnabled = false;\n        this.ctx.mozImageSmoothingEnabled = false;\n        this.ctx.imageSmoothingEnabled = false;\n        this.ctx.clearRect(xPos, yPos, ts, ts);\n\n        if (tile.object instanceof Player) {\n          this.playerCanvasPos = {x: j, y: i};\n        }\n\n        if (tile.object || tile.isHole) {\n          this.ctx.drawImage(this.tiles.cb, xPos, yPos, ts, ts);\n\n          if (tile.isHole) this.ctx.drawImage(this.tiles.ch, xPos, yPos, ts, ts);\n          if (tile.object) this.ctx.drawImage(this.tiles[tile.object.type], xPos, yPos, ts, ts);\n        } else {\n          this.ctx.drawImage(this.tiles[tile.type], xPos, yPos, ts, ts);\n        }\n\n        this.darken(tile, xPos, yPos, ts);\n      }\n    }\n\n  }\n\n  drawOuterBounds() {\n    const ts = this.tSize;\n\n    for (let i = 0; i < window.innerHeight / ts; i++) {\n      for (let j = 0; j < window.innerWidth / ts; j++) {\n        const xPos = j * ts;\n        const yPos = i * ts;\n        this.ctx.drawImage(this.tiles.wb, xPos, yPos, ts, ts);\n        this.darken(this.tiles.wb, xPos, yPos, ts);\n      }\n    }\n  }\n\n  calcBounds() {\n    const {cx, cy} = this.cameraPos;\n    const fovX = Math.floor(this.fov.x / 2);\n    const fovY = Math.floor(this.fov.y / 2);\n\n    let camX, camY, fov = {};\n\n    if (cx + fovX >= this.mapWidth) {\n      camX = this.mapWidth - this.fov.x;\n    } else if (cx - fovX < 0) {\n      camX = 0;\n    } else camX = cx - fovX;\n\n    if (cy + fovY >= this.mapHeight) {\n      camY = this.mapHeight - this.fov.y;\n    } else if (cy - fovY < 0) {\n      camY = 0;\n    } else camY = cy - fovY;\n\n    return {camX: camX, camY: camY};\n  }\n\n  darken(tile, xPos, yPos, ts) {\n    const xDiff = Math.abs(this.cameraPos.cx - tile.x);\n    const yDiff = Math.abs(this.cameraPos.cy - tile.y);\n    let alpha = 0.75;\n\n    this.ctx.fillStyle = 'black';\n    if (yDiff === 5 && xDiff <= 1) {\n      alpha = 0.15;\n    } else if (yDiff === 4 && xDiff <= 2) {\n      alpha = xDiff < 2 ? 0 : 0.15;\n    } else if (yDiff === 3 && xDiff <= 3) {\n      alpha = xDiff < 3 ? 0 : 0.15;\n    } else if (yDiff === 2 && xDiff <= 4) {\n      alpha = xDiff < 4 ? 0 : 0.15;\n    } else if (yDiff <= 1 && xDiff <= 5) {\n      alpha = xDiff < 5 ? 0 : 0.15;\n    }\n\n    this.ctx.globalAlpha = alpha;\n    this.ctx.fillRect(xPos, yPos, ts, ts);\n    this.ctx.globalAlpha = 1;\n\n  }\n\n  loadTiles(tileSet) {\n    const tileSetKeys = Object.keys(tileSet);\n    for (let i = 0; i < tileSetKeys.length; i++) {\n      const tile = tileSetKeys[i];\n      this.tiles[tile] = new Image();\n      this.tiles[tile].src = tileSet[tile];\n      this.tiles[tile].onload = () => {\n        this.init(tileSetKeys.length);\n      };\n    }\n  }\n\n  getBackgroundMap(mapWidth, mapHeight) {\n    const backgroundMap = [];\n    for (let y = 0; y < mapHeight; y++) {\n      const row = [];\n      for (let x = 0; x < mapWidth; x++) {\n        const newMapNode = new MapNode(y, x, 'w1');\n        row.push(newMapNode);\n      }\n      backgroundMap.push(row);\n    }\n    return backgroundMap;\n  }\n\n  removeGaps() {\n    const dirs = [\n      [-1, -1],\n      [-1, 0],\n      [-1, 1],\n      [0, 1],\n      [1, 1],\n      [1, 0],\n      [1, -1],\n      [0, -1],\n    ];\n\n    let removed = true;\n\n    while (removed) {\n      removed = false;\n      for (let i = 1; i < this.mapHeight - 1; i++) {\n        for (let j = 1; j < this.mapWidth - 1; j++) {\n          const tile = this.map[i][j];\n          if (tile.type !== 'w1') continue;\n\n          let count = 0, n = 0, s = 0, e = 0, w = 0, solids = [];\n\n          dirs.forEach(dir => {\n            if (this.map[i + dir[0]][j + dir[1]].type === 'cb') {\n              count +=1;\n              solids.push(dir);\n            }\n          });\n\n          if (count > 5) {\n            removed = true;\n            tile.type = 'cb';\n          } else if (count === 5) {\n            let y = 0, x = 0;\n\n            solids.forEach(dir => {\n              y += dir[0];\n              x += dir[1];\n            });\n\n            if (Math.abs(y) === 3 || Math.abs(x) === 3) {\n              tile.type = 'cb';\n            }\n          }\n        }\n      }\n    }\n  }\n\n  generateWalls() {\n    const validwalls = ['wn', 'ws', 'we', 'ww', 'wnw', 'wne', 'wsw', 'wse'];\n    for (let i = 0; i < this.mapHeight; i++) {\n      for (let j = 0; j < this.mapWidth; j++) {\n        const c = this.map[i][j];\n\n        if (i === 0 || i === this.mapHeight - 1 || j === 0 || j === this.mapWidth - 1) {\n          c.type = 'wb';\n          continue;\n        }\n\n        if (c.type !== 'w1') continue;\n\n        let newtype = 'w';\n\n        const n = this.map[i - 1][j];\n        const s = this.map[i + 1][j];\n        const e = this.map[i][j + 1];\n        const w = this.map[i][j - 1];\n\n        if (n.type === 'cb') newtype += 'n';\n        if (s.type === 'cb') newtype += 's';\n        if (e.type === 'cb') newtype += 'e';\n        if (w.type === 'cb') newtype += 'w';\n\n        if (validwalls.indexOf(newtype) !== -1) {\n          c.type = newtype;\n        } else {\n          c.type = 'wb';\n        }\n      }\n    }\n  }\n\n  generateRooms(minWidth, maxWidth, minHeight, maxHeight, attempts, maxRooms) {\n    const rooms = [];\n    let i = 0;\n\n    loop1:\n    while (rooms.length < maxRooms && i < attempts) {\n      i++;\n\n      const newRoom = new Room(\n        minWidth,\n        maxWidth,\n        minHeight,\n        maxHeight,\n        this.map\n      );\n\n      for (let j = 0; j < rooms.length; j++) {\n        if (newRoom.collidesWith(rooms[j])) {\n          continue loop1;\n        }\n      }\n\n      newRoom.render();\n      rooms.push(newRoom);\n    }\n    return rooms;\n  }\n\n  generatePaths() {\n    const paths = [];\n    for (let i = 0; i < this.rooms.length - 1; i++) {\n      const door1 = this.rooms[i].generateDoorLocation();\n      const door2 = this.rooms[i + 1].generateDoorLocation();\n      const path = new Path(door1, door2, this.map);\n      paths.push(path);\n    }\n\n    paths.forEach(path => path.render());\n\n    return paths;\n  }\n\n  placeHole() {\n    let holeNode = null;\n\n    while (!holeNode) {\n      const pos = this.randomLocation();\n      const node = this.map[pos.y][pos.x];\n\n      if (node.type === 'cb') holeNode = node;\n    }\n\n    holeNode.isHole = true;\n\n    this.hole = holeNode;\n  }\n\n  randomLocation() {\n    let node;\n\n    do {\n      const room = this.rooms[randomNumber(0, this.rooms.length - 1)];\n      let y = randomNumber(room.absPos.y, room.absPos.y + room.height - 1);\n      let x = randomNumber(room.absPos.x, room.absPos.x + room.width - 1);\n\n      node = this.map[y][x];\n    } while (!this.validNode(node));\n\n    return node;\n  }\n\n  removeEnemy(enemy) {\n    const enemyIdx = this.enemies.indexOf(enemy);\n    this.enemies.splice(enemyIdx, 1);\n  }\n\n  spawnEnemies(n) {\n    const weapon = {\n      name: \"maul\",\n      damage: 5\n    };\n\n    for (let i = 0; i < n; i++) {\n      const monsterhp = this.number * 20;\n      const monsterweap = {\n        name: 'maul',\n        damage: 4 * this.number\n      };\n      const enemy = new Enemy(\n        'monster',\n        [monsterhp, monsterhp],\n        monsterweap,\n        `m${this.number % 24}`,\n        this.number\n      );\n\n      const node = this.randomLocation();\n\n      enemy.spawn(node);\n\n      this.enemies.push(enemy);\n    }\n  }\n\n  spawnPlayer(player) {\n    player.spawn(this.randomLocation());\n    this.player = player;\n\n    this.updateCameraPos();\n  }\n\n  getPlayerFacingNode() {\n    const {cx, cy} = this.cameraPos;\n    const diff = { x: 0, y:0 };\n\n    switch (this.player.type) {\n      case 'hn':\n        diff.y = -1;\n        break;\n      case 'hs':\n        diff.y = 1;\n        break;\n      case 'hw':\n        diff.x = -1;\n        break;\n      case 'he':\n        diff.x = 1;\n        break;\n    }\n\n    return this.map[cy + diff.y][cx + diff.x];\n  }\n\n  updateCameraPos() {\n    const node = this.player.node;\n    this.cameraPos = Object.assign({}, {cx: node.x, cy: node.y});\n  }\n\n  validNode(node) {\n    return node.type === 'cb' && (!node.object || node.isHole);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/floor.js","export default class Hud {\n  constructor(player, ctx) {\n    this.player = player;\n    player.hud = this;\n    this.ctx = ctx;\n    this.currentFloor = 0;\n    this.events = [];\n    this.classes = [\n      'name',\n      'lvl',\n      'xp',\n      'hp',\n      'weap',\n      'events',\n      'floor-num',\n      'remain'\n    ];\n\n    this.initialize();\n  }\n\n  initialize() {\n    for (let i = 0; i < this.classes.length; i++) {\n      const clss = this.classes[i];\n      this[clss + 'DOM'] = document.querySelector(`.${clss}`);\n\n      if (i < 6) this.updatePlayer(clss);\n    }\n  }\n\n  updateFloor(floor) {\n    this.currentFloor += 1;\n    this['floor-numDOM'].firstChild.nodeValue = this.currentFloor;\n\n    this.updateEnemies(floor.enemies);\n  }\n\n  updateEnemies(enemies) {\n    this.enemiesRemaining = enemies.length;\n    this['remainDOM'].firstChild.nodeValue = this.enemiesRemaining;\n  }\n\n  updatePlayer(attr) {\n    const value = this.player[attr];\n    switch (attr) {\n      case 'name':\n      case 'lvl':\n      case 'xp':\n        this[attr + 'DOM'].firstChild.nodeValue = value;\n        break;\n      case 'hp':\n        this[attr + 'DOM'].firstChild.nodeValue = `${value[0]} / ${value[1]}`;\n        break;\n      case 'weap':\n        this[attr + 'DOM'].firstChild.nodeValue = value.name;\n    }\n  }\n\n  addBattleEvent(off, def) {\n    const event = `${off.name} dealt ${off.weap.damage} dmg to ${def.name}!`;\n    this.updateEvents(event);\n  }\n\n  addXPEvent(xp, enemy) {\n    const event = `You gained ${xp}xp from slaying ${enemy.name}.`;\n    this.updateEvents(event);\n  }\n\n  addLvlUpEvent() {\n    const currentlvl = this.player.lvl;\n    const event = `You leveled up from ${currentlvl - 1} to ${currentlvl}`;\n    this.updateEvents(event);\n  }\n\n  addFloorEvent() {\n    let event = `You descend into the dungeon...`;\n    if (this.currentFloor > 1) {\n      event = `You fall down a hole, deeper into the dungeon.`;\n    }\n    this.updateEvents(event);\n  }\n\n  addItemPickupEvent(item) {\n    const event = `You have found a(n) ${item.name}!`;\n    this.updateEvents(event);\n  }\n\n  updateEvents(event) {\n    this.events.push(event);\n\n    const eventsNode = document.querySelector('.events');\n    const span = document.createElement('span');\n    const text = document.createTextNode(event);\n\n    span.appendChild(text);\n    eventsNode.insertBefore(span, eventsNode.firstChild);\n\n    if (eventsNode.childNodes.length > 5) {\n      eventsNode.removeChild(eventsNode.lastChild);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hud.js","import Enemy from './enemy';\nimport Weapon from './weapon';\n\nexport default class MapNode {\n  constructor(y, x, type) {\n    this.y = y;\n    this.x = x;\n    this.type = type;\n    this.object = null;\n    this.isDoor = false;\n    this.parent = null;\n    this.fCost = null;\n    this.gCost = null;\n  }\n\n  traversable(map, pos) {\n    if (this.validPos(map, pos)) {\n      const node = map[pos[0]][pos[1]];\n      if (node.isDoor || node.type === 'w1') return true;\n    }\n    return false;\n  }\n\n  restore(item) {\n    this.object = item ? item : null;\n  }\n\n  validPos(map, pos) {\n    return (pos[0] > 0 && pos[0] < map.length) &&\n    (pos[1] < map[0].length && pos[1] > 0);\n  }\n\n  getTraversableNeighbors(map) {\n    const neighbors = [];\n    const dirs = [[-1, 0], [0, 1], [1, 0], [0, -1]];\n\n    dirs.forEach(dir => {\n      const y = this.y + dir[0];\n      const x = this.x + dir[1];\n      const pos = [y, x];\n\n      if (this.traversable(map, pos)) neighbors.push(map[y][x]);\n    });\n\n    return neighbors;\n  }\n\n  isEnemyNode() {\n    return (this.object instanceof Enemy);\n  }\n\n  hasItem() {\n    return this.object instanceof Weapon;\n  }\n\n  allNeighbors(map) {\n    const dirs = [\n      [-1, -1],\n      [-1, 0],\n      [-1, 1],\n      [0, 1],\n      [1, 1],\n      [1, 0],\n      [-1, -1],\n      [0, -1],\n    ];\n\n    let neighbors = [];\n\n    dirs.forEach(dir => {\n      const neighbor = map[this.y + dir[0]][this.x + dir[1]];\n      neighbors.push(neighbor);\n    });\n\n    return neighbors;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/map_node.js","import {BinaryMinHeap} from './util.js';\n\nexport default class Path {\n  constructor(startNode, targetNode, map) {\n    this.startNode = startNode;\n    this.targetNode = targetNode;\n    this.map = map;\n    this.path = [];\n\n    this.aStarPathFinder();\n  }\n\n  fCostComparator(node1, node2) {\n    if (node1.fCost > node2.fCost) {\n      return 1;\n    } else if (node1.fCost < node2.fCost) {\n      return -1;\n    } else return 0;\n  }\n\n  aStarPathFinder() {\n    const open = new BinaryMinHeap(this.fCostComparator),\n    closed = [];\n\n    this.startNode.gCost = 0;\n    this.startNode.fCost = this.calculateHCost(this.startNode);\n\n    open.push(this.startNode);\n    while (open.count() > 0) {\n      const current = open.extract();\n      closed.push(current);\n\n      if (current === this.targetNode) {\n        return this.reconstructPath();\n      }\n\n      const neighbors = current.getTraversableNeighbors(this.map);\n      for (let i = 0; i < neighbors.length; i++) {\n        const neighbor = neighbors[i];\n\n        if (closed.indexOf(neighbor) !== -1) continue;\n\n        const newGCost = current.gCost + 1;\n        if (open.store.indexOf(neighbor) === -1) {\n          open.push(neighbor);\n        } else if (newGCost >= neighbor.gCost) {\n          continue;\n        }\n        neighbor.gCost = newGCost;\n        neighbor.fCost = newGCost + this.calculateHCost(neighbor);\n        neighbor.parent = current;\n        open.recompareNode(neighbor);\n      }\n    }\n  }\n\n  render() {\n    this.path.forEach(node => {\n      node.type = 'cb';\n    });\n  }\n\n  reconstructPath(closed) {\n    let currentNode = this.targetNode;\n\n    while (currentNode !== this.startNode) {\n      const parentNode = currentNode.parent;\n      this.path.push(parentNode);\n      currentNode = parentNode;\n    }\n  }\n\n  calculateHCost(node) {\n    const dx = Math.abs(node.x - this.targetNode.x);\n    const dy = Math.abs(node.y - this.targetNode.y);\n    return dx + dy;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/path.js","import {randomNumber} from './util';\n\nexport default class Room {\n  constructor(minWidth, maxWidth, minHeight, maxHeight, map) {\n    this.id = null;\n    this.width = randomNumber(minWidth, maxWidth);\n    this.height = randomNumber(minHeight, maxHeight);\n    this.map = map;\n    this.absPos = this.getRandomPosition(map[0].length, map.length);\n    this.corners = this.getCorners();\n  }\n\n  render() {\n    this.edges = this.linearizeEdges();\n    this.drawMain();\n  }\n\n  getRandomPosition(mapWidth, mapHeight) {\n    const xUpperLimit = mapWidth - this.width - 3;\n    const yUpperLimit = mapHeight - this.height - 3;\n    return {\n      x: randomNumber(3, xUpperLimit),\n      y: randomNumber(3, yUpperLimit)\n    };\n  }\n\n  generateDoorLocation() {\n    const door = this.edges[Math.floor(Math.random() * (this.edges.length))];\n    this.openPath(door);\n    door.isDoor = true;\n    return door;\n  }\n\n  openPath(door) {\n    const coords = [[-1, 0], [0, 1], [1, 0], [0, -1]];\n\n    for (let i = 0; i < coords.length; i++) {\n      const x = door.x + coords[i][1];\n      const y = door.y + coords[i][0];\n      const node = this.map[y][x];\n      if (node.type === 'w2') {\n        node.type = 'w1';\n        return;\n      }\n    }\n  }\n\n  linearizeEdges() {\n    const absX = this.absPos.x, absY = this.absPos.y;\n    const absXLimit = absX + this.width - 1;\n    const absYLimit = absY + this.height - 1;\n\n    const edges = [];\n\n    for (let y = absY; y <= absYLimit; y += (this.height - 1)) {\n      for (let x = absX; x <= absXLimit; x++) {\n        const node = this.map[y][x];\n        edges.push(node);\n      }\n    }\n\n    for (let y = absY + 1; y < absYLimit; y++) {\n      for (let x = absX; x <= absXLimit; x += (this.width - 1)) {\n        const node = this.map[y][x];\n        edges.push(node);\n      }\n    }\n\n    return edges;\n  }\n\n  drawMain() {\n    const absX = this.absPos.x, absY = this.absPos.y;\n    const absXLimit = absX + this.width - 1;\n    const absYLimit = absY + this.height - 1;\n    for (let y = absY ; y <=  absYLimit; y++) {\n      for (let x = absX ; x <= absXLimit; x++) {\n        const node = this.map[y][x];\n        node.type = 'cb';\n      }\n    }\n  }\n\n  getCorners() {\n    return {\n      nw: {\n        x: this.absPos.x - 2,\n        y: this.absPos.y - 2\n      },\n      ne: {\n        x: this.absPos.x + this.width + 1,\n        y: this.absPos.y - 2\n      },\n      sw: {\n        x: this.absPos.x - 2,\n        y: this.absPos.y + this.height + 1,\n      },\n      se: {\n        x: this.absPos.x + this.width + 1,\n        y: this.absPos.y + this.height + 1\n      }\n    };\n  }\n\n  collidesWith(room) {\n    const {nw, ne, sw, se} = this.corners;\n    return (\n      (nw.x <= room.corners.ne.x && ne.x >= room.corners.nw.x) &&\n      (nw.y <= room.corners.sw.y && sw.y >= room.corners.nw.y)\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/room.js","import Game from './game';\n\nconst CaveTileset = {\n  w1: \"./assets/images/cave/cave_void.png\",\n  wb: \"./assets/images/cave/cave_solid.png\",\n  wn: \"./assets/images/cave/cave_solid_n.png\",\n  we: \"./assets/images/cave/cave_solid_e.png\",\n  ww: \"./assets/images/cave/cave_solid_w.png\",\n  wnw: \"./assets/images/cave/cave_solid_nw.png\",\n  wne: \"./assets/images/cave/cave_solid_ne.png\",\n  ws: \"./assets/images/cave/cave_solid_s.png\",\n  wsw: \"./assets/images/cave/cave_solid_sw.png\",\n  wse: \"./assets/images/cave/cave_solid_se.png\",\n  ch: \"./assets/images/cave/cave_hole1.png\",\n  cb: \"./assets/images/cave/cave_base.png\",\n  cv: \"./assets/images/cave/cave_void.png\",\n  hs: \"./assets/images/char/char_s.png\",\n  he: \"./assets/images/char/char_e.png\",\n  hn: \"./assets/images/char/char_n.png\",\n  hw: \"./assets/images/char/char_w.png\",\n  m0: \"./assets/images/monsters/monster_23.png\",\n  m1: \"./assets/images/monsters/monster_00.png\",\n  m2: \"./assets/images/monsters/monster_01.png\",\n  m3: \"./assets/images/monsters/monster_02.png\",\n  m4: \"./assets/images/monsters/monster_03.png\",\n  m5: \"./assets/images/monsters/monster_04.png\",\n  m6: \"./assets/images/monsters/monster_05.png\",\n  m7: \"./assets/images/monsters/monster_06.png\",\n  m8: \"./assets/images/monsters/monster_07.png\",\n  m9: \"./assets/images/monsters/monster_08.png\",\n  m10: \"./assets/images/monsters/monster_09.png\",\n  m11: \"./assets/images/monsters/monster_10.png\",\n  m12: \"./assets/images/monsters/monster_11.png\",\n  m13: \"./assets/images/monsters/monster_12.png\",\n  m14: \"./assets/images/monsters/monster_13.png\",\n  m15: \"./assets/images/monsters/monster_14.png\",\n  m16: \"./assets/images/monsters/monster_15.png\",\n  m17: \"./assets/images/monsters/monster_16.png\",\n  m18: \"./assets/images/monsters/monster_17.png\",\n  m19: \"./assets/images/monsters/monster_18.png\",\n  m20: \"./assets/images/monsters/monster_19.png\",\n  m21: \"./assets/images/monsters/monster_20.png\",\n  m22: \"./assets/images/monsters/monster_21.png\",\n  isw00 : './assets/images/items/weapons/sword_00.png',\n  isw01 : './assets/images/items/weapons/sword_01.png',\n  isw02 : './assets/images/items/weapons/sword_02.png',\n  isw03 : './assets/images/items/weapons/sword_03.png',\n  isw04 : './assets/images/items/weapons/sword_04.png',\n  isw05 : './assets/images/items/weapons/sword_05.png',\n  isw06 : './assets/images/items/weapons/sword_06.png',\n  isw07 : './assets/images/items/weapons/sword_07.png',\n  isw08 : './assets/images/items/weapons/sword_08.png',\n  isw09 : './assets/images/items/weapons/sword_09.png',\n  isw10 : './assets/images/items/weapons/sword_10.png',\n  isw11 : './assets/images/items/weapons/sword_11.png',\n  isw12 : './assets/images/items/weapons/sword_12.png',\n  isw13 : './assets/images/items/weapons/sword_13.png',\n  isw14 : './assets/images/items/weapons/sword_14.png',\n  isw15 : './assets/images/items/weapons/sword_15.png',\n  isw16 : './assets/images/items/weapons/sword_16.png',\n  isw17 : './assets/images/items/weapons/sword_17.png',\n  isw18 : './assets/images/items/weapons/sword_18.png',\n  isw19 : './assets/images/items/weapons/sword_19.png',\n  isw20 : './assets/images/items/weapons/sword_20.png',\n  isw21 : './assets/images/items/weapons/sword_21.png',\n  isw22 : './assets/images/items/weapons/sword_22.png',\n  cuta00: './assets/images/effects/cut_a/cut_a_0001.png',\n  cuta01: './assets/images/effects/cut_a/cut_a_0002.png',\n  cuta02: './assets/images/effects/cut_a/cut_a_0003.png',\n  cuta03: './assets/images/effects/cut_a/cut_a_0004.png',\n  cuta04: './assets/images/effects/cut_a/cut_a_0005.png',\n  cutd00: './assets/images/effects/cut_d/cut_d_0001.png',\n  cutd01: './assets/images/effects/cut_d/cut_d_0002.png',\n  cutd02: './assets/images/effects/cut_d/cut_d_0003.png',\n  cutd03: './assets/images/effects/cut_d/cut_d_0004.png',\n  cutd04: './assets/images/effects/cut_d/cut_d_0005.png',\n  empty: './assets/images/effects/empty.png'\n};\n\nconst newGame = (playerName) => {\n  if (!(/\\w/).test(playerName)) playerName = 'player1';\n\n  const canvas = document.getElementById('main');\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const ctx = canvas.getContext('2d');\n  const game = new Game(playerName, canvas, ctx, CaveTileset);\n};\n\nconst enterGameScreen = () => {\n  const hud = document.querySelector('.hud');\n  const modal = document.querySelector('.modal-main');\n  const entergame = document.querySelector('.enter-game');\n  const playerName = document.querySelector('.player-name');\n  playerName.focus();\n\n  entergame.addEventListener('submit', () => {\n    event.preventDefault();\n\n    hud.style.display = 'flex';\n    modal.style.display = 'none';\n    newGame(playerName.value);\n  });\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  const mainmenu = document.querySelector('.main-menu');\n  const menubuttons = document.getElementsByClassName('menu-button');\n\n  const newgame = document.querySelector('.new-game');\n  const howto = document.querySelector('.how-to');\n  const about = document.querySelector('.about');\n\n  menubuttons[0].addEventListener('click', () => {\n    mainmenu.style.display = 'none';\n    newgame.style.display = 'flex';\n    enterGameScreen();\n  });\n\n  menubuttons[1].addEventListener('click', () => {\n    mainmenu.style.display = 'none';\n    howto.style.display = 'flex';\n  });\n\n  menubuttons[2].addEventListener('click', () => {\n    mainmenu.style.display = 'none';\n    about.style.display = 'flex';\n  });\n\n  const backbuttons = document.getElementsByClassName('back-menu');\n\n  Array.from(backbuttons).forEach((el) => {\n    el.addEventListener('click', () => {\n      el.parentElement.style.display = 'none';\n      mainmenu.style.display = 'flex';\n    });\n  });\n\n\n  const bgmusic = document.querySelector('audio');\n  const toggleAudio = document.querySelector('.toggle-audio');\n  bgmusic.play();\n\n  let isPlaying = true;\n  toggleAudio.addEventListener('click', () => {\n    if (isPlaying) {\n      bgmusic.pause();\n      toggleAudio.style.backgroundImage = \"url('./assets/images/other/audio_off.png')\";\n      isPlaying = false;\n    } else {\n      bgmusic.play();\n      toggleAudio.style.backgroundImage = \"url('./assets/images/other/audio_on.png')\";\n      isPlaying = true;\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}